<div ng-controller="pageWithTopMenuController">
</div>

<div ng-controller="FlatController">
    <!-- begin breadcrumb -->
    <ol class="breadcrumb pull-right">
        <li><a href="javascript:;">Home</a></li>
        <li class="active">Flats</li>
    </ol>
    <!-- end breadcrumb -->
    <!-- begin page-header -->
    <h1 class="page-header">Flats <small></small></h1>
    <!-- end page-header -->
    <div class="row">
 		 <div class="col-md-5">
            <div class="panel panel-inverse">
                <div class="panel-heading">
                    <div class="panel-heading-btn">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                    </div>
                    <h4 class="panel-title"> Add / Modify Flat</h4>

                </div>   

                <div class="panel-body">

                <form class="form-horizontal" name="validationForm" ng-submit="addFlat();">

              	<input type="hidden" class="form-control" ng-model="flat.id" name="id"  />

                        <div class="form-group">

                           <label class="col-md-4 control-label">Select Apartment <span class="text-danger">*</span></label>

                            <div class="col-md-6">

                            <select class="form-control" ng-model="flat.apartment" name="apartment" required ng-change="getBlocks()">

                            	<option value="">Select Apartment</option>

                            	<option ng-repeat="apt in apartments" value="{{apt.id}}" ng-selected="apt.id==flat.apartment">{{apt.name}} - {{apt.area_id.name}}</option>

                            </select>

                            </div>   

                        </div>

                        <div class="form-group">
                           <label class="col-md-4 control-label">Select Block <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                            <select class="form-control" ng-model="flat.block" required>
                            	<option value=""> Select Block </option>
                           		 <option ng-repeat="b in blocks" value="{{b.id}}" ng-selected="b.id==flat.block">{{b.name}}</option>
                            </select>
                            </div>     
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Flat Name <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ng-model="flat.name" name="name" autocomplete="off" placeholder="Enter Flat Name" required />
                            </div>   
                        </div>
                       
                    <div ng-if="flat.id">
                        <div class="form-group">
                            <label class="control-label col-md-4" for="unitType">Unit Type </label>
                            <div class="col-md-6">
                              <select class="form-control" ng-model="flat.unitType" name="unitType" id="unitType" required >
                                <option value="">Select Flat Type</option>
                                <option value="1BHK" ng-selected="flat.unitType=='1BHK'">1BHK</option>
                                <option value="2BHK" ng-selected="flat.unitType=='2BHK'">2BHK</option>
                                <option value="3BHK" ng-selected="flat.unitType=='3BHK'">3BHK</option>
                                <option value="4BHK" ng-selected="flat.unitType=='4BHK'">4BHK</option>
                              </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Flat Area(Sft) <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ng-model="flat.area" name="area" autocomplete="off" placeholder="Enter Flat area in sft" required />
                            </div>   
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Flat Facing <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <select class="form-control" ng-model="flat.facing" name="facing" required >
                                <option value="">Select Flat Facing</option>
                                <option value="east">East</option>
                                <option value="west">West</option>
                                <option value="north">North</option>
                                <option value="south">South</option>
                                <option value="northeast">North East</option>
                                <option value="southeast">South East</option>
                                <option value="southwest">South West</option>
                                <option value="northwest">North West</option>
                              </select>
                            </div>
                        </div>   
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Intercom Number <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ng-model="flat.intercom" name="intercom" autocomplete="off" placeholder="Enter Intercom No" required />
                            </div>   
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Electricity USN <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ng-model="flat.eusn" name="eusn" autocomplete="off" placeholder="Enter Electricity Usn No" required />
                            </div>   
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Ready For Sale <span class="text-danger">*</span></label>
                            <div class="col-md-3">
                                <input type="radio" ng-model="flat.sale" name="sale" autocomplete="off" value="1"   /> Yes
                            </div> 
                            <div class="col-md-3">
                                <input type="radio" ng-model="flat.sale" name="sale" autocomplete="off" value="0"   /> No
                            </div>   
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Ready to Occupy <span class="text-danger">*</span></label>
                            <div class="col-md-3">
                                <input type="radio"  ng-model="flat.roccupy" name="roccupy" value="1"   /> Yes
                            </div> 
                            <div class="col-md-3">
                                <input type="radio" ng-model="flat.roccupy" name="roccupy" value="0"   /> No
                            </div>   
                        </div>
                        
                        
                        <div class="form-group" ng-show="flat.sale==1">
                            <label class="control-label col-md-4" for="flat">Sale Price <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ng-model="flat.salePrice" name="salePrice" autocomplete="off" placeholder="Enter Sale Price" required ng-disabled="flat.sale==0" />
                            </div>   
                        </div>
                        <div class="form-group" ng-show="flat.roccupy==1">
                            <label class="control-label col-md-4" for="flat">Rent Price <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ng-model="flat.rentPrice" name="rentPrice" autocomplete="off" placeholder="Enter Rent Price" required ng-disabled="flat.roccupy==0" />
                            </div>   
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Number of People Stay<span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" class="form-control" ng-model="flat.nofpplStay" name="nofpplStay" autocomplete="off" placeholder="Enter Number of People Stay" required />
                            </div>   
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Contact 1 <span class="text-danger">*</span></label>
                            <div class="col-md-3">
                                <input type="text" class="form-control" ng-model="flat.cntOneName" name="cntOneName" autocomplete="off" placeholder="Enter Name" required />
                            </div>
                            <div class="col-md-3">
                                <input type="text" class="form-control" ng-model="flat.cntOneMobile" name="cntOneMobile" autocomplete="off" placeholder="Enter Phone No" required />
                            </div>   
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4" for="flat">Contact 2<span class="text-danger">*</span></label>
                            <div class="col-md-3">
                                <input type="text" class="form-control" ng-model="flat.cntTwoName" name="cntTwoName" autocomplete="off" placeholder="Enter Name" required />
                            </div>
                            <div class="col-md-3">
                                  <input type="text" class="form-control" ng-model="flat.cntTwoMobile" name="cntTwoMobile" autocomplete="off" placeholder="Enter Phone No" required />
                            </div>   
                        </div>
                       
                    </div>
                        <div class="form-group m-b-0">
                            <label class="control-label col-md-4"></label>
                            <div class="col-md-6">
                                <button type="submit" class="btn btn-primary width-xs">Submit</button>
                            </div>
                        </div>
   				</form>
                </div>

</div></div>                

        <div class="col-md-7">

            <div class="panel panel-inverse">

                <div class="panel-heading">

                    <div class="panel-heading-btn">

                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>

                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>

                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>

                    </div>

                    <h4 class="panel-title">Flats List</h4>

                </div>

                <div class="panel-body">

                   <div class="panel-body">
					<div class="table-responsive">
                   <div class="col-md-3 search1">
                          <input class="form-control" type="search" ng-model="search" name="search" placeholder="Search"  /><br />

                       </div> 
                    <table ng-table="tableParams"  class="table table-striped table-bordered nowrap" width="100%">

                        <tbody>

                            <tr ng-repeat="f in $data | filter:search ">

                                <td data-title="'S.No'" sortable="'id'">{{f.id}}</td>

                                <td data-title="'Flat Name'" sortable="'name'">{{f.name}}</td>

                                <td data-title="'Block Name'" sortable="'block_id.name'">{{f.block_id.name}}</td>

                                <td data-title="'Apartment Name'" sortable="'block_id.apt_id.name'">{{f.block_id.apt_id.name}}</td>                                
                                <td data-title="'Status'" sortable="'status'"><img src="assets/img/{{f.status}}.png" ng-click="statusFlat(f.id);" > </td>

                                <td data-title="'Edit'"><img src="assets/img/edit.png" ng-click="editFlat(f.id);" > </td>

                            </tr>

                        </tbody>

                    </table>

                </div>


            </div> 

           </div>

        </div>

    </div>

</div>

